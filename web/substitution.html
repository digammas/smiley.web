<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Substitution Service</title>
</head>
<body>
<a href='index.html'>Go to welcome page</a><br/>
<div style="color: red" id="error"></div>
<div>
	<p>Please enter a message.</p>
	<textarea name='msg' id="message">Hello :)</textarea><br/>
	<button onclick="submit()">Send</button>
</div>
<pre id="result">
</pre>

<script>
function submit() {
	var message = document.querySelector("#message").value;
	var errorElement = document.querySelector("#error");
	var messageElement = document.querySelector("#result");
	var xhr = new XMLHttpRequest();
	xhr.open("GET", `rest/substitute?msg=${encodeURI(message)}`);
	xhr.onload = function() {
		errorElement.innerHTML = "";
		messageElement.innerHTML = this.responseText;
	}
	xhr.onerror = function() {
		errorElement.innerHTML = "An error occured!";
		messageElement.innerHTML = "";
	}
	xhr.send();
}
</script>
</body>
</html>